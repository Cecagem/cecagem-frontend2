(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2956],{9446:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(19946).A)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},10141:(e,a,s)=>{Promise.resolve().then(s.bind(s,38775))},13717:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},38775:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>Z});var t=s(95155),i=s(91165),l=s(19018),n=s(30285),r=s(22346),c=s(3501),d=s(23861),o=s(12115),u=s(84616),x=s(51775),m=s(47924),h=s(62523),g=s(59409),v=s(66695);let j=e=>{let{filters:a,onFiltersChange:s,onClearFilters:i,isLoading:l=!1}=e,r=(e,t)=>{s({...a,[e]:t})},c=Object.values(a).some(e=>void 0!==e&&""!==e&&null!==e&&"all"!==e);return(0,t.jsx)(v.Zp,{children:(0,t.jsx)(v.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(h.p,{placeholder:"Buscar clientes...",value:a.search||"",onChange:e=>r("search",e.target.value),className:"pl-10",disabled:l})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)(g.l6,{value:!0===a.isActive?"active":!1===a.isActive?"inactive":"all",onValueChange:e=>{r("isActive","active"===e||"inactive"!==e&&void 0)},children:[(0,t.jsx)(g.bq,{children:(0,t.jsx)(g.yv,{placeholder:"Todos los estados"})}),(0,t.jsxs)(g.gC,{children:[(0,t.jsx)(g.eb,{value:"all",children:"Todos los estados"}),(0,t.jsx)(g.eb,{value:"active",children:"Activos"}),(0,t.jsx)(g.eb,{value:"inactive",children:"Inactivos"})]})]})}),(0,t.jsx)("div",{children:c&&(0,t.jsx)(n.$,{variant:"outline",onClick:i,disabled:l,className:"w-full",children:"Limpiar Filtros"})})]})})})};var p=s(31455),f=s(13439),b=s(13717),N=s(62525),y=s(88889),k=s(90010),C=s(26126);function w(e){let{clients:a,isLoading:s=!1,onEditClient:i,serverPagination:l=!1,paginationMeta:r,onPageChange:c,onPageSizeChange:d}=e,[u,m]=(0,o.useState)(null),h=(0,x.bL)(),g=async()=>{if(u)try{await h.mutateAsync(u.id),m(null)}catch(e){console.error("Error al eliminar cliente:",e)}},v=(0,o.useMemo)(()=>[{accessorKey:"profile.firstName",header:"Cliente",cell:e=>{let{row:a}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:[a.original.profile.firstName," ",a.original.profile.lastName]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:a.original.profile.career})]})}},{accessorKey:"email",header:"Email"},{accessorKey:"profile.documentNumber",header:"Documento",cell:e=>{let{row:a}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm",children:a.original.profile.documentType}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:a.original.profile.documentNumber})]})}},{accessorKey:"profile.phone",header:"Tel\xe9fono"},{accessorKey:"profile.university",header:"Universidad",cell:e=>{let{row:a}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:a.original.profile.university}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:a.original.profile.faculty})]})}},{accessorKey:"profile.academicDegree",header:"Grado"},{accessorKey:"isActive",header:"Estado",cell:e=>{let a,{row:s}=e;return a=s.original.isActive,(0,t.jsx)(C.E,{variant:a?"default":"destructive",children:a?"Activo":"Inactivo"})}},{accessorKey:"createdAt",header:"Fecha Registro",cell:e=>{let{row:a}=e;var s=a.original.createdAt;try{return(0,p.GP)(new Date(s),"dd/MM/yyyy",{locale:f.es})}catch(e){return"Fecha inv\xe1lida"}}},{id:"actions",header:"Acciones",cell:e=>{let{row:a}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),i(a.original)},className:"h-8 px-2",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),m(a.original)},className:"h-8 px-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})]})}}],[i]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.b,{data:a,columns:v,isLoading:s,title:"Clientes de Investigaci\xf3n",noDataMessage:"No se encontraron clientes de investigaci\xf3n",enablePagination:!0,enableSorting:!0,pageSize:10,serverPagination:l,paginationMeta:r,onPageChange:c,onPageSizeChange:d}),(0,t.jsx)(k.Lt,{open:!!u,onOpenChange:()=>m(null),children:(0,t.jsxs)(k.EO,{children:[(0,t.jsxs)(k.wd,{children:[(0,t.jsx)(k.r7,{children:"\xbfEliminar Cliente?"}),(0,t.jsxs)(k.$v,{children:["\xbfEst\xe1s seguro de que deseas eliminar al cliente"," ",(0,t.jsxs)("span",{className:"font-semibold",children:[null==u?void 0:u.profile.firstName," ",null==u?void 0:u.profile.lastName]}),"? Esta acci\xf3n no se puede deshacer."]})]}),(0,t.jsxs)(k.ck,{children:[(0,t.jsx)(k.Zr,{children:"Cancelar"}),(0,t.jsx)(k.Rx,{onClick:g,className:"bg-red-600 hover:bg-red-700 text-white",disabled:h.isPending,children:h.isPending?"Eliminando...":"Eliminar"})]})]})})]})}var A=s(72273),E=s(17580),z=s(55670),M=s(9446),S=s(69074),P=s(44922);let L=e=>{let{stats:a,isLoading:s=!1}=e,i=[{title:"Total Clientes",value:a.totalClients,icon:E.A,subtitle:"Clientes registrados",variant:"default"},{title:"Clientes Activos",value:a.activeClients,icon:z.A,subtitle:"Actualmente activos",variant:"success"},{title:"Clientes Inactivos",value:a.inactiveClients,icon:M.A,subtitle:"Actualmente inactivos",variant:"error"},{title:"Nuevos Este Mes",value:a.thisMonthClients,icon:S.A,subtitle:"Registrados este mes",variant:"default"}];return(0,t.jsx)(P.M,{columns:4,children:i.map((e,a)=>(0,t.jsx)(P.h,{title:e.title,value:e.value,subtitle:e.subtitle,icon:e.icon,loading:s,variant:e.variant},a))})};function q(){let[e,a]=(0,o.useState)({page:1,limit:10,type:"clients"}),[s,i]=(0,o.useState)(!1),[l,r]=(0,o.useState)(!1),[c,d]=(0,o.useState)(null),{data:m,isLoading:h,error:g,refetch:v}=(0,x.r8)(e),{data:p,isLoading:f}=(0,x.eH)(),b=(null==m?void 0:m.data)||[],N=null==m?void 0:m.meta,y=(0,o.useCallback)(e=>{a(a=>({...a,page:e}))},[]),k=(0,o.useCallback)(e=>{a(a=>({...a,limit:e,page:1}))},[]),C=(0,o.useCallback)(e=>{a(a=>({...a,...e,type:"clients",page:1}))},[]),E=(0,o.useCallback)(()=>{a({page:1,limit:10,type:"clients"})},[]),z=()=>{i(!1),r(!1),d(null),v()};return g?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Clientes de Investigaci\xf3n"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Gestiona los clientes que requieren servicios de investigaci\xf3n y tesis"})]})}),(0,t.jsxs)("div",{className:"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,t.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:"Error al cargar los clientes de investigaci\xf3n"}),(0,t.jsx)(n.$,{onClick:()=>v(),variant:"outline",children:"Reintentar"})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Clientes de Investigaci\xf3n"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Gestiona los clientes que requieren servicios de investigaci\xf3n y tesis"})]}),(0,t.jsxs)(n.$,{className:"text-white w-full sm:w-auto",onClick:()=>{d(null),i(!0)},children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Nuevo Cliente"]})]}),(0,t.jsx)(L,{stats:p||{totalClients:0,activeClients:0,inactiveClients:0,thisMonthClients:0},isLoading:f}),(0,t.jsx)(j,{filters:e,onFiltersChange:C,onClearFilters:E}),(0,t.jsx)(w,{clients:b,isLoading:h,onEditClient:e=>{d(e),r(!0)},serverPagination:!0,paginationMeta:N,onPageChange:y,onPageSizeChange:k}),(0,t.jsx)(A.Z,{open:s,onOpenChange:i,onClientSaved:z,mode:"create"}),(0,t.jsx)(A.Z,{open:l,onOpenChange:r,onClientSaved:z,client:c,mode:"edit"})]})}function Z(){return(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsxs)("header",{className:"bg-background/60 backdrop-blur-md sticky top-0 z-50 flex h-12 shrink-0 items-center gap-2 border-b px-4",children:[(0,t.jsx)(c.SidebarTrigger,{className:"-ml-1"}),(0,t.jsx)(r.Separator,{orientation:"vertical",className:"mr-2 h-4"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(l.Qp,{children:(0,t.jsx)(l.AB,{children:(0,t.jsx)(l.J5,{children:(0,t.jsx)(l.tJ,{children:"Clientes de Investigaci\xf3n"})})})})}),(0,t.jsxs)("div",{className:"ml-auto mr-4",children:[(0,t.jsx)(i.default,{}),(0,t.jsx)(n.$,{variant:"ghost",size:"icon","aria-label":"Notificaciones",className:"mr-2",children:(0,t.jsx)(d.A,{className:"h-5 w-5"})})]})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-6 p-4 md:p-6",children:(0,t.jsx)(q,{})})]})}s(53044)},44922:(e,a,s)=>{"use strict";s.d(a,{h:()=>n,M:()=>r});var t=s(95155),i=s(66695);let l={default:"text-blue-600",success:"text-green-600",warning:"text-orange-600",error:"text-red-600"};function n(e){let{title:a,value:s,subtitle:n,icon:r,variant:c="default",loading:d=!1}=e;return d?(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,t.jsx)("div",{className:"h-3 w-20 bg-muted rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-6 w-8 bg-muted rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-3 w-16 bg-muted rounded animate-pulse"})]}),(0,t.jsx)("div",{className:"h-8 w-8 bg-muted rounded-md animate-pulse"})]})})}):(0,t.jsx)(i.Zp,{className:"transition-all hover:shadow-sm",children:(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:a}),(0,t.jsx)("p",{className:"text-xl font-bold ".concat(l[c]),children:s}),n&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]}),(0,t.jsx)("div",{className:"p-2 rounded-md bg-muted/50",children:(0,t.jsx)(r,{className:"h-4 w-4 text-muted-foreground"})})]})})})}function r(e){let{children:a,columns:s=4}=e;return(0,t.jsx)("div",{className:"grid gap-3 ".concat({2:"md:grid-cols-2",3:"md:grid-cols-2 lg:grid-cols-3",4:"md:grid-cols-2 lg:grid-cols-4"}[s]),children:a})}},47262:(e,a,s)=>{"use strict";s.d(a,{S:()=>r});var t=s(95155);s(12115);var i=s(34848),l=s(5196),n=s(59434);function r(e){let{className:a,...s}=e;return(0,t.jsx)(i.bL,{"data-slot":"checkbox",className:(0,n.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,t.jsx)(i.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(l.A,{className:"size-3.5"})})})}},55670:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(19946).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},90010:(e,a,s)=>{"use strict";s.d(a,{$v:()=>g,EO:()=>u,Lt:()=>r,Rx:()=>v,Zr:()=>j,ck:()=>m,r7:()=>h,tv:()=>c,wd:()=>x});var t=s(95155);s(12115);var i=s(475),l=s(59434),n=s(30285);function r(e){let{...a}=e;return(0,t.jsx)(i.bL,{"data-slot":"alert-dialog",...a})}function c(e){let{...a}=e;return(0,t.jsx)(i.l9,{"data-slot":"alert-dialog-trigger",...a})}function d(e){let{...a}=e;return(0,t.jsx)(i.ZL,{"data-slot":"alert-dialog-portal",...a})}function o(e){let{className:a,...s}=e;return(0,t.jsx)(i.hJ,{"data-slot":"alert-dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...s})}function u(e){let{className:a,...s}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{}),(0,t.jsx)(i.UC,{"data-slot":"alert-dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...s})]})}function x(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",a),...s})}function m(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...s})}function h(e){let{className:a,...s}=e;return(0,t.jsx)(i.hE,{"data-slot":"alert-dialog-title",className:(0,l.cn)("text-lg font-semibold",a),...s})}function g(e){let{className:a,...s}=e;return(0,t.jsx)(i.VY,{"data-slot":"alert-dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",a),...s})}function v(e){let{className:a,...s}=e;return(0,t.jsx)(i.rc,{className:(0,l.cn)((0,n.r)(),a),...s})}function j(e){let{className:a,...s}=e;return(0,t.jsx)(i.ZD,{className:(0,l.cn)((0,n.r)({variant:"outline"}),a),...s})}}},e=>{e.O(0,[9558,5041,8859,5089,221,8034,2764,5838,7632,2896,3240,1339,8403,8889,2273,8441,5964,7358],()=>e(e.s=10141)),_N_E=e.O()}]);